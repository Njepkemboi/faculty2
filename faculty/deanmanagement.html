<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dean Management</title>
<style>

    
body {
    margin: 0;
    font-family: Arial, sans-serif;
  }
  
  .sidebar {
    height: 100%;
    width: 220px;
    position: fixed;
    top: 0;
    left: 0;
    background-color: #110533;
    padding-top: 20px;
  }
  
  
  .content {
    margin-left: 200px;
    padding: 20px;
  }
  
  
  
  .footer {
  background-color: #3b043d;
  color: #fff;
  padding: 20px;
  text-align: center;
  position: fixed;
  bottom: 0;
  width: 100%;
  }
  
  
  /* Style for side navigation bar links */
  .sidebar a {
    padding: 10px 15px;
    text-decoration: none;
    font-size: 18px;
    color: #f2f2f2;
    display: block;
  }
  
  /* color of links on hover */
  .sidebar a:hover {
    background-color: #decde6;
              color:black;
  }
  
  /* Style dropdown menu */
  .dropdown {
    position: relative;
    display: inline-block;
  }
  
  /* Style dropdown button */
  .dropdown .dropbtn {
    background-color: inherit;
    color: #f2f2f2;
    padding: 10px 15px;
    font-size: 18px;
    border: none;
    cursor: pointer;
    width: 100%;
    text-align: left;
  }
  
  /* Change the color of dropdown button on hover */
  .dropdown:hover .dropbtn {
    background-color: #decde6;
  }
  
  /* Style the dropdown menu content (hidden by default) */
  .dropdown-content {
    display: none;
    position: absolute;
    background-color: #381b68;
    min-width: 200px;
    z-index: 1;
  }
  
  /* Style the links inside the dropdown */
  .dropdown-content a {
    color: white;
    padding: 10px 15px;
    text-decoration: none;
    display: block;
  }
  
  /* background color to dropdown links on hover */
  .dropdown-content a:hover {
    background-color: #ddd;
    color: rgb(39, 9, 63);
  }
  
  /* Show the dropdown menu on hover */
  .dropdown:hover .dropdown-content {
    display: block;
  }
  
  
  .dropdown-content {
    display: none;
    position: absolute;
    background-color: rgb(39, 9, 63);
    min-width: 200px;
    z-index: 1;
  }
  
  /* Styles for the links inside the dropdown */
  .dropdown-content a {
    color: white;
    padding: 10px 15px;
    text-decoration: none;
    display: block;
  }
  
  
  /* Show the dropdown menu on hover */
  .dropdown:hover .dropdown-content {
    display: block;
  }

  /* NAVBAR CSS ENDS HERE */

  
    /* CSS for styling the buttons */
    .edit-btn, .view-btn {
        background-color: blue;
        color: white;
        border: none;
        padding: 5px 10px;
        cursor: pointer;
    }

    .add-btn {
        background-color: navy;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
    }

    .save-btn, .update-btn {
        background-color: blue;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
    }

    /* CSS for the cancel button */
    .cancel-btn {
        background-color: red;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
    }

    /* CSS for the popup form */
    .popup {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 1px solid navy;
        background-color: white;
        padding: 20px;
        z-index: 9999;
    }

    /* Style input fields */
    input[type=text], input[type=email], input[type=password] {
        width: 100%;
        padding: 10px;
        margin: 5px 0;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }

    /* Center the table horizontally */
    .container {
        text-align: center;
        padding: 20px;
        border: 1px solid navy;
        border-radius:
        8px;
        background-color: #f9f9f9;
        max-width: 50%;
        margin: 100px auto; /* Center the container and add top margin */
    }

    table {
        margin: 0 auto;
        width: 100%;
        border-collapse: collapse;
    }

    /* Center the "Add Dean" button */
    .add-btn-container {
        text-align: center;
        margin-bottom: 20px;
    }

    /* Modal popup styles */
    .modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgb(0,0,0);
        background-color: rgba(0,0,0,0.4);
    }

    .modal-content {
        background-color: #fefefe;
        margin: 10% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
    }

    /* Close button for the modal */
    .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
    }
</style>
</head>
<body>

    <div class="sidebar">
        <h1 style="color: aliceblue;">Admin Panel</h1>
        <a href="#Home">Dashboard</a>
      <a href="academicyear.html">Academic year</a>
      <a href="coursemanagement.html">Course Management</a>
      <a href="unitmanagement.html">Unit Management</a>
      <a href="evaluationcriterial.html">Evaluation criteria</a>
      <a href="questionsmanagement.html">Questions management</a>
      <div class="dropdown">
        <button class="dropbtn">Schools</button>
        <div class="dropdown-content">
          <a href="#Courses">Computing Science</a>
          <a href="#Courses">International Relations</a>
          <a href="#Courses">Business</a>
        </div>
      </div>
      <a href="deanmanagement.html">Dean management</a>
      <a href="facultymanagement.html">Faculty management</a>
      <a href="studentmanagement.html">Student management</a>
      <a href="#reports">Evaluation reports</a>
      <a href="#user">User Management</a>
    </div>

<div class="container">
    <h1 style="color: navy;">Dean Management</h1>

    <div class="add-btn-container">
        <button class="add-btn" onclick="openPopup()">Add Dean</button>
    </div>

    <div>
        <table>
            <thead>
                <tr style="background-color: navy; color: white;">
                    <th style="padding: 10px;">Name</th>
                    <th style="padding: 10px;">School</th>
                    <th style="padding: 10px;">Email</th>
                    <th style="padding: 10px;">Action</th>
                </tr>
            </thead>
            <tbody id="deanTableBody">
                <!-- Table rows will be dynamically added here -->
            </tbody>
        </table>
    </div>
</div>

<div id="popupForm" class="popup">
    <h2 style="color: navy;">Add Dean</h2>
    <form id="deanForm">
        <label for="name" style="color: navy;">Name:</label>
        <input type="text" id="name" name="name" required><br><br>
        <label for="school" style="color: navy;">School:</label>
        <input type="text" id="school" name="school" required><br><br>
        <label for="email" style="color: navy;">Email:</label>
        <input type="email" id="email" name="email" required><br><br>
        <label for="password" style="color: navy;">Password:</label>
        <input type="password" id="password" name="password" required><br><br>
        <label for="confirm_password" style="color: navy;">Confirm Password:</label>
        <input type="password" id="confirm_password" name="confirm_password" required><br><br>
        <button type="submit" class="save-btn">Save</button>
        <button type="button" class="cancel-btn" onclick="closePopup()">Cancel</button>
    </form>
</div>

<!-- Modal for viewing dean details -->
<div id="viewModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2>Dean Details</h2>
        <p id="modalDeanDetails"></p>
    </div>
</div>

<!-- Popup for showing duplicate entry -->
<div id="duplicatePopup" class="popup">
    <h2 style="color: navy;">Duplicate Entry</h2>
    <p>This dean with the same school or email already exists.</p>
    <button onclick="closeDuplicatePopup()">Close</button>
</div>

<script>
    function openPopup() {
        document.getElementById("popupForm").style.display = "block";
    }

    document.getElementById("deanForm").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent form submission
        var name = document.getElementById("name").value;
        var school = document.getElementById("school").value;
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        var confirm_password = document.getElementById("confirm_password").value;

        // Check if the dean already exists
        var existingDeanSchools = document.querySelectorAll("#deanTableBody tr td:nth-child(2)");
        var existingDeanEmails = document.querySelectorAll("#deanTableBody tr td:nth-child(3)");
        for (var i = 0; i < existingDeanSchools.length; i++) {
            if (existingDeanSchools[i].textContent === school || existingDeanEmails[i].textContent === email) {
                document.getElementById("duplicatePopup").style.display = "block";
                return;
            }
        }

        // Validation for password and confirm password
        if (password !== confirm_password) {
            alert("Passwords do not match");
            return;
        }

        // Add dean data to the table
        addDeanToTable(name, school, email);

        // For simplicity, let's just close the popup for now
        closePopup();
    });

    function closePopup() {
        document.getElementById("popupForm").style.display = "none";
    }

    function addDeanToTable(name, school, email) {
        var tableBody = document.getElementById("deanTableBody");
        var newRow = document.createElement("tr");
        newRow.innerHTML = `
            <td><span class="editable" onclick="editDean(this)">${name}</span></td>
            <td><span class="editable" onclick="editDean(this)">${school}</span></td>
            <td><span class="editable" onclick="editDean(this)">${email}</span></td>
            <td>
                <button class="view-btn" onclick="viewDean('${name}', '${school}', '${email}')">View</button>
            </td>
        `;
        tableBody.appendChild(newRow);
    }

    function editDean(element) {
        var originalText = element.textContent;
        var input = document.createElement("input");
        input.type = "text";
        input.value = originalText;
        input.onblur = function() {
            // Validation for unique school or email
            var columnIndex = element.parentElement.cellIndex;
            var existingElements = document.querySelectorAll(`#deanTableBody tr td:nth-child(${columnIndex + 1})`);
            for (var i = 0; i < existingElements.length; i++) {
                if (existingElements[i] !== element && existingElements[i].textContent === input.value) {
                    document.getElementById("duplicatePopup").style.display = "block";
                    input.value = originalText; // Revert back to the original value
                    return;
                }
            }

            element.textContent = input.value;
            element.style.display = "";
        };
        input.onkeydown = function(event) {
            if (event.key === "Enter") {
                input.blur();
            }
        };
        element.textContent = "";
        element.appendChild(input);
        input.focus();
    }

    function viewDean(name, school, email) {
        var modal = document.getElementById("viewModal");
        var modalDeanDetails = document.getElementById("modalDeanDetails");
        modalDeanDetails.innerHTML = `
            <strong>Name:</strong> ${name}<br>
            <strong>School:</strong> ${school}<br>
            <strong>Email:</strong> ${email}<br>
        `;
        modal.style.display = "block";
    }

    function closeModal() {
        var modal = document.getElementById("viewModal");
        modal.style.display = "none";
    }

    function closeDuplicatePopup() {
        document.getElementById("duplicatePopup").style.display = "none";
    }
</script>

</body>
</html>
